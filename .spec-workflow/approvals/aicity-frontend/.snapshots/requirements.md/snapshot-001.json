{
  "id": "snapshot_1764768505079_rnnp9tfgr",
  "approvalId": "approval_1764768505058_4ftylr0ri",
  "approvalTitle": "Requirements - AI City 前端需求文档",
  "version": 1,
  "timestamp": "2025-12-03T13:28:25.079Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements Document - AI City 前端系统\r\n\r\n## Introduction\r\n\r\nAI City 前端是\"智舆 - AI 城市舆情态势监测感知与决策推演系统\"的可视化展示层，负责提供 3D 地图可视化、实时舆情监测、AI 分析展示和决策模拟交互等核心功能。系统采用 Vue 3 + Vite 技术栈，以高德地图 3D 为核心可视化引擎。\r\n\r\n## Alignment with Product Vision\r\n\r\n本前端系统直接支撑 product.md 中定义的核心产品目标：\r\n\r\n- **可视化驱动**：提供 3D 地图为核心的舆情态势展示\r\n- **实时感知**：通过 WebSocket 实现舆情实时推送和预警\r\n- **AI 赋能**：展示讯飞星火大模型的分析结果\r\n- **决策支撑**：提供决策模拟的交互界面\r\n\r\n## Requirements\r\n\r\n### REQ-1: 3D 地图可视化\r\n\r\n**User Story:** 作为城市管理者，我希望在 3D 地图上直观查看舆情态势分布，以便快速掌握全局情况。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 系统启动 THEN 系统 SHALL 加载高德地图 3D 视图，默认显示信阳市中心区域\r\n2. WHEN 用户操作地图 THEN 系统 SHALL 支持缩放、旋转、倾斜等 3D 交互\r\n3. WHEN 存在舆情热点 THEN 系统 SHALL 在地图上以标记点形式显示，并按等级用不同颜色区分\r\n4. WHEN 用户点击舆情标记 THEN 系统 SHALL 显示该舆情的详细信息面板\r\n5. IF 舆情等级为高 THEN 系统 SHALL 以红色脉冲动画突出显示\r\n\r\n### REQ-2: 实时舆情监测\r\n\r\n**User Story:** 作为舆情分析员，我希望实时看到最新舆情动态，以便第一时间响应热点事件。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 有新舆情数据 THEN 系统 SHALL 在监测面板实时滚动显示\r\n2. WHEN 新舆情到达 THEN 系统 SHALL 显示来源平台、内容类型（文字/图片/视频）和时间\r\n3. WHEN 用户点击舆情条目 THEN 系统 SHALL 定位到地图对应位置并高亮显示\r\n4. IF 舆情为高危级别 THEN 系统 SHALL 触发视觉预警提示\r\n\r\n### REQ-3: 舆情分析展示\r\n\r\n**User Story:** 作为决策者，我希望看到 AI 对舆情的分析结论，以便了解舆情性质和趋势。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 系统分析完成 THEN 系统 SHALL 在分析卡片中显示情感倾向、关键词和摘要\r\n2. WHEN 存在趋势数据 THEN 系统 SHALL 以图表形式展示舆情发展趋势\r\n3. WHEN 用户查看分析 THEN 系统 SHALL 显示 AI 置信度和分析时间\r\n4. IF 趋势上升 THEN 系统 SHALL 以醒目的增长指示器提示\r\n\r\n### REQ-4: 决策模拟交互\r\n\r\n**User Story:** 作为城市管理者，我希望模拟不同决策方案的效果，以便选择最优应对策略。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 用户打开决策面板 THEN 系统 SHALL 显示可选的决策方案列表\r\n2. WHEN 用户选择方案 THEN 系统 SHALL 触发 AI 模拟并显示预测结果\r\n3. WHEN 模拟完成 THEN 系统 SHALL 展示不同方案的对比效果\r\n4. IF 用户自定义方案 THEN 系统 SHALL 支持参数调整后重新模拟\r\n\r\n### REQ-5: 区域层级切换\r\n\r\n**User Story:** 作为省级管理者，我希望从全省视角逐层下钻到具体区县，以便分级查看舆情分布。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 用户查看省级视图 THEN 系统 SHALL 显示各地级市舆情热度\r\n2. WHEN 用户点击城市 THEN 系统 SHALL 下钻显示该市区县舆情分布\r\n3. WHEN 用户点击区县 THEN 系统 SHALL 显示具体街道/社区舆情点\r\n4. IF 用户点击返回 THEN 系统 SHALL 回退到上一层级视图\r\n\r\n### REQ-6: 语音交互 (待集成)\r\n\r\n**User Story:** 作为操作员，我希望通过语音控制系统，以便解放双手快速操作。\r\n\r\n#### Acceptance Criteria\r\n\r\n1. WHEN 用户说出语音指令 THEN 系统 SHALL 通过讯飞 ASR 识别并执行\r\n2. WHEN 有预警播报 THEN 系统 SHALL 通过讯飞 TTS 语音合成播报\r\n3. IF 语音识别失败 THEN 系统 SHALL 显示文字输入备选方案\r\n\r\n## Non-Functional Requirements\r\n\r\n### Code Architecture and Modularity\r\n\r\n- **Single Responsibility Principle**: 每个 Vue 组件专注单一功能\r\n- **Modular Design**: 组件按 features/layout/ui 分层组织\r\n- **Dependency Management**: 使用 Pinia 集中管理状态，避免组件间直接耦合\r\n- **Clear Interfaces**: 组件通过 Props/Emits 定义清晰接口\r\n\r\n### Performance\r\n\r\n- **首屏加载**: < 3 秒完成地图渲染\r\n- **3D 渲染**: 保持 60 FPS 流畅度\r\n- **实时更新**: 舆情推送延迟 < 1 秒\r\n- **内存占用**: 3D 场景内存 < 500MB\r\n\r\n### Security\r\n\r\n- **API Key 保护**: 高德地图 Key 不暴露在客户端代码中\r\n- **讯飞 API 安全**: 通过后端代理调用，不直接暴露 API Key\r\n- **XSS 防护**: 对用户输入和舆情内容进行转义处理\r\n\r\n### Reliability\r\n\r\n- **地图加载失败**: 提供重试机制和友好错误提示\r\n- **WebSocket 断连**: 自动重连并恢复数据同步\r\n- **降级方案**: 3D 加载失败时降级为 2D 视图\r\n\r\n### Usability\r\n\r\n- **响应式设计**: 支持桌面端和平板端访问\r\n- **深色主题**: 统一使用深色科技感 UI 风格\r\n- **交互反馈**: 所有操作提供视觉/动画反馈\r\n- **无障碍**: 关键元素提供 tooltip 说明\r\n",
  "fileStats": {
    "size": 5224,
    "lines": 118,
    "lastModified": "2025-12-03T13:28:16.839Z"
  },
  "comments": []
}