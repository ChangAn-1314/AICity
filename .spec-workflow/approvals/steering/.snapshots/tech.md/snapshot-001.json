{
  "id": "snapshot_1764756180807_r452xdsz6",
  "approvalId": "approval_1764756180729_sdvl9smc1",
  "approvalTitle": "Technology Stack - 智舆系统技术架构",
  "version": 1,
  "timestamp": "2025-12-03T10:03:00.807Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Technology Stack\r\n\r\n## Project Type\r\n\r\nWeb 应用 + 跨平台应用，城市舆情态势监测与决策推演系统。\r\n\r\n- 主体为 Web 端 SPA 应用\r\n- 未来计划通过 Tauri 2.0 支持桌面端和移动端\r\n\r\n## Core Technologies\r\n\r\n### Primary Language(s)\r\n\r\n| 层级       | 语言            | 版本  | 用途                      |\r\n| ---------- | --------------- | ----- | ------------------------- |\r\n| **前端**   | JavaScript/Vue3 | 3.5.x | UI 框架                   |\r\n| **后端**   | Python          | 3.11+ | API 服务、AI 推理         |\r\n| **跨平台** | Rust            | -     | Tauri 2.0 原生层 (规划中) |\r\n\r\n### Key Dependencies/Libraries\r\n\r\n#### 前端依赖 (已采用)\r\n\r\n| 库名                     | 版本     | 用途               |\r\n| ------------------------ | -------- | ------------------ |\r\n| **Vue 3**                | ^3.5.13  | 响应式 UI 框架     |\r\n| **Vite**                 | ^6.0.11  | 构建工具           |\r\n| **Element Plus**         | ^2.9.3   | UI 组件库          |\r\n| **Pinia**                | ^2.3.1   | 状态管理           |\r\n| **TailwindCSS**          | ^3.4.17  | 原子化 CSS         |\r\n| **高德地图 JS API**      | 2.0      | 3D 地图底图        |\r\n| **Cesium**               | ^1.123.0 | 3D 地球/城市渲染   |\r\n| **Three.js**             | ^0.181.2 | WebGL 3D 渲染      |\r\n| **ECharts**              | ^5.6.0   | 数据可视化图表     |\r\n| **Socket.io-client**     | ^4.8.1   | WebSocket 实时通信 |\r\n| **3d-tiles-renderer**    | ^0.4.18  | 3D Tiles 渲染      |\r\n| **@baidumap/mapv-three** | ^1.4.1   | 地图可视化         |\r\n\r\n#### 后端依赖 (待集成)\r\n\r\n| 库名           | 用途              |\r\n| -------------- | ----------------- |\r\n| **FastAPI**    | 异步 Web 框架     |\r\n| **Celery**     | 异步任务队列      |\r\n| **Redis**      | 缓存/消息队列     |\r\n| **LangGraph**  | 多 Agent 决策框架 |\r\n| **LlamaIndex** | RAG 框架          |\r\n\r\n### Application Architecture\r\n\r\n```\r\n┌─────────────────────────────────────────────────────────────┐\r\n│                      前端展示层 [已采用]                     │\r\n│   Vue3 + Vite + 高德地图3D + Cesium + Three.js + ECharts   │\r\n│   Element Plus + TailwindCSS + Pinia + Socket.io           │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      后端服务层 [待集成]                     │\r\n│        FastAPI + Celery + Redis + WebSocket                │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      AI分析层 [待集成]                       │\r\n│   讯飞星火4.0 + LangGraph/CrewAI + LoRA微调 + RAG          │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      3D生成层 [待集成]                       │\r\n│   Tripo AI / Meshy + 3D Gaussian Splatting + TripoSR       │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      语音交互层 [待集成]                     │\r\n│   讯飞TTS + 讯飞ASR + 实时语音流式交互                      │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      数据采集层 [待集成]                     │\r\n│            Scrapy + Playwright + 官方API接口                │\r\n├─────────────────────────────────────────────────────────────┤\r\n│                      数据存储层 [待集成]                     │\r\n│          PostgreSQL + Elasticsearch + MinIO                │\r\n└─────────────────────────────────────────────────────────────┘\r\n```\r\n\r\n### Data Storage (待集成)\r\n\r\n| 类型           | 技术          | 用途                 |\r\n| -------------- | ------------- | -------------------- |\r\n| **关系数据库** | PostgreSQL    | 结构化数据、用户信息 |\r\n| **搜索引擎**   | Elasticsearch | 舆情全文检索         |\r\n| **缓存**       | Redis         | 热点数据、会话缓存   |\r\n| **对象存储**   | MinIO         | 图片、视频、3D 模型  |\r\n| **向量数据库** | Chroma/Qdrant | AI 语义检索          |\r\n\r\n### External Integrations\r\n\r\n#### 讯飞技术栈 (核心加分项)\r\n\r\n| 服务                   | API 类型       | 用途                 |\r\n| ---------------------- | -------------- | -------------------- |\r\n| **讯飞星火 4.0 Ultra** | HTTP/WebSocket | 舆情分析、趋势预测   |\r\n| **讯飞星火 Lite**      | HTTP           | 轻量任务 (永久免费)  |\r\n| **讯飞在线 TTS**       | WebSocket      | 语音合成播报         |\r\n| **讯飞实时 ASR**       | WebSocket      | 语音识别交互         |\r\n| **讯飞 LFASR**         | HTTP           | 长音频转写           |\r\n| **讯飞 NLP**           | HTTP           | 情感分析、关键词提取 |\r\n\r\n#### 地图服务\r\n\r\n| 服务                    | 用途                          |\r\n| ----------------------- | ----------------------------- |\r\n| **高德地图 JS API 2.0** | 3D 地图底图、区域边界、建筑层 |\r\n| **Cesium Ion**          | 全球 3D 地形、建筑白模        |\r\n\r\n#### AI 3D 生成\r\n\r\n| 服务         | 用途                |\r\n| ------------ | ------------------- |\r\n| **Tripo AI** | 文字/图片转 3D 模型 |\r\n| **TripoSR**  | 单图转 3D (开源)    |\r\n\r\n### Monitoring & Dashboard Technologies\r\n\r\n- **Dashboard Framework**: Vue3 + Element Plus\r\n- **Real-time Communication**: Socket.io (WebSocket)\r\n- **Visualization Libraries**: ECharts、Three.js、Cesium\r\n- **State Management**: Pinia\r\n\r\n## Development Environment\r\n\r\n### Build & Development Tools\r\n\r\n| 工具         | 用途                  |\r\n| ------------ | --------------------- |\r\n| **Vite**     | 前端构建、HMR 热更新  |\r\n| **npm**      | 包管理                |\r\n| **ESLint**   | 代码检查 (推荐添加)   |\r\n| **Prettier** | 代码格式化 (推荐添加) |\r\n\r\n### Code Quality Tools\r\n\r\n- **Static Analysis**: ESLint + Vue ESLint Plugin (推荐)\r\n- **Formatting**: Prettier (推荐)\r\n- **Testing Framework**: Vitest + Cypress (推荐)\r\n- **Documentation**: JSDoc / VitePress (推荐)\r\n\r\n### Version Control & Collaboration\r\n\r\n- **VCS**: Git\r\n- **Branching Strategy**: Feature Branch + Main\r\n- **Code Review Process**: Pull Request\r\n\r\n## Deployment & Distribution\r\n\r\n| 平台        | 方式                    | 产物           |\r\n| ----------- | ----------------------- | -------------- |\r\n| **Web**     | 静态部署 (Nginx/Vercel) | HTML/JS/CSS    |\r\n| **Desktop** | Tauri 2.0 (规划)        | .exe/.dmg/.deb |\r\n| **Mobile**  | Tauri Mobile (规划)     | .apk/.ipa      |\r\n\r\n## Technical Requirements & Constraints\r\n\r\n### Performance Requirements\r\n\r\n| 指标             | 目标     |\r\n| ---------------- | -------- |\r\n| **首屏加载**     | < 3 秒   |\r\n| **3D 渲染帧率**  | > 30 FPS |\r\n| **舆情更新延迟** | < 30 秒  |\r\n| **API 响应时间** | < 500ms  |\r\n\r\n### Compatibility Requirements\r\n\r\n- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+\r\n- **操作系统**: Windows 10+, macOS 10.15+, Ubuntu 20.04+\r\n- **移动端**: iOS 14+, Android 10+ (Tauri Mobile 规划)\r\n\r\n### Security & Compliance\r\n\r\n- **API 认证**: JWT Token + API Key\r\n- **数据传输**: HTTPS/WSS 加密\r\n- **敏感数据**: 环境变量存储，不硬编码\r\n\r\n### Scalability & Reliability\r\n\r\n- **预期负载**: 初期 100 并发用户\r\n- **可用性**: 99% 在线时间\r\n- **数据量**: 日均 10 万条舆情数据\r\n\r\n## Technical Decisions & Rationale\r\n\r\n### Decision Log\r\n\r\n1. **Vue3 + Vite**: 响应式框架，生态成熟，Vite 构建速度快\r\n2. **高德地图 JS API 2.0**: 国内数据完整，3D 支持好，免费额度充足\r\n3. **Cesium**: 全球 3D 地球支持，与高德配合使用\r\n4. **讯飞星火**: 赛事加分项，中文理解能力强，API 价格合理\r\n5. **LangGraph**: 状态化多 Agent 框架，适合决策模拟场景\r\n6. **Tripo AI**: 文字/图片转 3D 速度快（约 10 秒），输出 GLB 格式兼容 Three.js\r\n\r\n## Known Limitations\r\n\r\n| 限制                            | 影响                | 解决方案                                       |\r\n| ------------------------------- | ------------------- | ---------------------------------------------- |\r\n| **Cesium OSM 建筑中国覆盖不足** | 小城市建筑数据缺失  | 使用高德建筑层 + Microsoft Building Footprints |\r\n| **3D 模型生成质量有限**         | AI 生成为低精度模型 | 定位为快速预览，非精确还原                     |\r\n| **实时数据采集合规性**          | 需遵守平台 ToS      | 优先使用官方 API                               |\r\n",
  "fileStats": {
    "size": 9704,
    "lines": 200,
    "lastModified": "2025-12-03T10:02:50.966Z"
  },
  "comments": []
}