{
  "id": "snapshot_1764767164945_nqo9vu4dw",
  "approvalId": "approval_1764767164916_ez2npzdf6",
  "approvalTitle": "Structure Document - 项目结构文档",
  "version": 1,
  "timestamp": "2025-12-03T13:06:04.945Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Project Structure\r\n\r\n## Directory Organization\r\n\r\n```\r\nAICity/                              # 项目根目录\r\n├── .spec-workflow/                  # Spec Workflow 配置\r\n│   ├── approvals/                   # 审批记录\r\n│   ├── specs/                       # 功能规格文档\r\n│   ├── steering/                    # 项目引导文档\r\n│   │   ├── product.md               # 产品概述\r\n│   │   ├── tech.md                  # 技术栈\r\n│   │   └── structure.md             # 项目结构 (本文档)\r\n│   └── templates/                   # 文档模板\r\n│\r\n├── AICityFornt/                     # 前端项目 (Vue3 + Vite)\r\n│   ├── public/                      # 静态资源\r\n│   │   └── models/                  # 3D 模型文件 (GLB/GLTF)\r\n│   ├── src/                         # 源代码\r\n│   │   ├── api/                     # API 接口封装 (待实现)\r\n│   │   ├── components/              # Vue 组件\r\n│   │   │   ├── features/            # 功能组件\r\n│   │   │   │   ├── Analysis/        # 舆情分析\r\n│   │   │   │   ├── Map/             # 3D 地图\r\n│   │   │   │   ├── Monitor/         # 实时监测\r\n│   │   │   │   └── Simulation/      # 决策模拟\r\n│   │   │   ├── layout/              # 布局组件\r\n│   │   │   └── ui/                  # 通用 UI 组件\r\n│   │   ├── router/                  # 路由配置 (待实现)\r\n│   │   ├── stores/                  # Pinia 状态管理 (待实现)\r\n│   │   ├── App.vue                  # 根组件\r\n│   │   ├── main.js                  # 入口文件\r\n│   │   └── style.css                # 全局样式\r\n│   ├── index.html                   # HTML 入口\r\n│   ├── package.json                 # 依赖配置\r\n│   ├── vite.config.js               # Vite 配置\r\n│   ├── tailwind.config.js           # Tailwind 配置\r\n│   └── postcss.config.js            # PostCSS 配置\r\n│\r\n├── AICityBackend/                   # 后端项目 (待创建)\r\n│   ├── app/                         # FastAPI 应用\r\n│   │   ├── api/                     # API 路由\r\n│   │   ├── services/                # 业务服务\r\n│   │   ├── models/                  # 数据模型\r\n│   │   └── core/                    # 核心配置\r\n│   ├── agents/                      # LangGraph Agent\r\n│   └── requirements.txt             # Python 依赖\r\n│\r\n├── AICityMind.md                    # 产品构思文档\r\n├── main.md                          # 功能需求文档\r\n├── stack.md                         # 技术栈详细文档\r\n└── prototypestack.md                # 原型技术方案\r\n```\r\n\r\n## 前端组件结构\r\n\r\n### components/features/ - 功能组件\r\n\r\n按业务功能划分，每个功能一个目录：\r\n\r\n```\r\nfeatures/\r\n├── Map/                             # 3D 地图模块\r\n│   ├── CityMap3D.vue                # 地图主组件 (Cesium)\r\n│   └── CityMap3D-AMap.vue           # 高德地图版本\r\n│\r\n├── Analysis/                        # 舆情分析模块\r\n│   └── InsightCard.vue              # 分析洞察卡片\r\n│\r\n├── Monitor/                         # 实时监测模块\r\n│   └── NewsTicker.vue               # 新闻滚动条\r\n│\r\n└── Simulation/                      # 决策模拟模块\r\n    └── DecisionPanel.vue            # 决策面板\r\n```\r\n\r\n### components/layout/ - 布局组件\r\n\r\n```\r\nlayout/\r\n├── AppShell.vue                     # 应用外壳 (主布局)\r\n└── DynamicIsland.vue                # 动态岛导航\r\n```\r\n\r\n### components/ui/ - 通用 UI 组件\r\n\r\n```\r\nui/\r\n├── GlassPanel.vue                   # 玻璃面板 (毛玻璃效果)\r\n└── NeonButton.vue                   # 霓虹按钮\r\n```\r\n\r\n## Naming Conventions\r\n\r\n### Files\r\n\r\n- **Vue 组件**: `PascalCase.vue` (如 `CityMap3D.vue`)\r\n- **JS 模块**: `camelCase.js` (如 `mapUtils.js`)\r\n- **样式文件**: `kebab-case.css` (如 `style.css`)\r\n- **配置文件**: `kebab-case.config.js` (如 `vite.config.js`)\r\n\r\n### Code\r\n\r\n- **组件名**: `PascalCase` (如 `CityMap3D`)\r\n- **函数/方法**: `camelCase` (如 `initMap`)\r\n- **常量**: `UPPER_SNAKE_CASE` (如 `AMAP_KEY`)\r\n- **变量**: `camelCase` (如 `mapInstance`)\r\n- **Props/Emits**: `camelCase` (如 `showPanel`)\r\n- **CSS 类**: `kebab-case` (如 `glass-panel`)\r\n\r\n## Import Patterns\r\n\r\n### Import Order\r\n\r\n```javascript\r\n// 1. Vue 核心\r\nimport { ref, computed, onMounted } from \"vue\";\r\n\r\n// 2. 第三方库\r\nimport AMapLoader from \"@amap/amap-jsapi-loader\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\n// 3. 组件\r\nimport GlassPanel from \"@/components/ui/GlassPanel.vue\";\r\n\r\n// 4. 工具函数\r\nimport { formatDate } from \"@/utils/date\";\r\n\r\n// 5. 样式\r\nimport \"./style.css\";\r\n```\r\n\r\n### Path Aliases\r\n\r\n```javascript\r\n// vite.config.js 中配置\r\n{\r\n  resolve: {\r\n    alias: {\r\n      '@': '/src',\r\n      '@components': '/src/components',\r\n      '@features': '/src/components/features',\r\n      '@ui': '/src/components/ui'\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Code Structure Patterns\r\n\r\n### Vue 组件结构 (Composition API)\r\n\r\n```vue\r\n<script setup>\r\n// 1. Imports\r\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\r\n\r\n// 2. Props & Emits\r\nconst props = defineProps({\r\n  title: String,\r\n});\r\nconst emit = defineEmits([\"update\"]);\r\n\r\n// 3. Reactive State\r\nconst data = ref(null);\r\nconst loading = ref(false);\r\n\r\n// 4. Computed\r\nconst displayData = computed(() => data.value?.items || []);\r\n\r\n// 5. Methods\r\nfunction handleClick() {\r\n  emit(\"update\", data.value);\r\n}\r\n\r\n// 6. Lifecycle\r\nonMounted(() => {\r\n  // 初始化\r\n});\r\n\r\nonUnmounted(() => {\r\n  // 清理\r\n});\r\n</script>\r\n\r\n<template>\r\n  <!-- 模板内容 -->\r\n</template>\r\n\r\n<style scoped>\r\n/* 组件样式 */\r\n</style>\r\n```\r\n\r\n### 3D 地图组件模式\r\n\r\n```javascript\r\n// 地图组件核心结构\r\nconst container = ref(null); // DOM 容器\r\nconst mapInstance = shallowRef(null); // 地图实例 (shallowRef 避免深度响应)\r\nconst AMap = shallowRef(null); // 地图 SDK\r\n\r\nonMounted(async () => {\r\n  await initMap();\r\n});\r\n\r\nonUnmounted(() => {\r\n  mapInstance.value?.destroy();\r\n});\r\n\r\nasync function initMap() {\r\n  // 1. 加载 SDK\r\n  // 2. 创建地图实例\r\n  // 3. 添加图层和控件\r\n  // 4. 绑定事件\r\n}\r\n```\r\n\r\n## Module Boundaries\r\n\r\n### 前端模块划分\r\n\r\n```\r\n┌─────────────────────────────────────────────────────────┐\r\n│                      App.vue                             │\r\n│  ┌─────────────────────────────────────────────────────┐│\r\n│  │                   AppShell.vue                      ││\r\n│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ ││\r\n│  │  │   Monitor   │  │     Map     │  │  Analysis   │ ││\r\n│  │  │  NewsTicker │  │  CityMap3D  │  │ InsightCard │ ││\r\n│  │  └─────────────┘  └─────────────┘  └─────────────┘ ││\r\n│  │  ┌─────────────┐  ┌─────────────────────────────────┐│\r\n│  │  │ Simulation  │  │           UI Components         ││\r\n│  │  │DecisionPanel│  │    GlassPanel | NeonButton      ││\r\n│  │  └─────────────┘  └─────────────────────────────────┘│\r\n│  └─────────────────────────────────────────────────────┘│\r\n└─────────────────────────────────────────────────────────┘\r\n```\r\n\r\n### 依赖方向\r\n\r\n- **UI 组件** (`ui/`): 无依赖，被其他组件使用\r\n- **布局组件** (`layout/`): 依赖 UI 组件\r\n- **功能组件** (`features/`): 依赖 UI 组件、布局组件\r\n- **API 模块** (`api/`): 独立，被功能组件调用\r\n- **Store** (`stores/`): 独立，被功能组件使用\r\n\r\n## Code Size Guidelines\r\n\r\n- **单文件组件**: 建议 < 500 行，超过考虑拆分\r\n- **函数/方法**: 建议 < 50 行\r\n- **嵌套深度**: 最大 4 层\r\n- **组件 Props**: 建议 < 10 个\r\n\r\n## Documentation Standards\r\n\r\n- **组件**: JSDoc 注释说明用途和 Props\r\n- **复杂逻辑**: 行内注释说明\r\n- **API 接口**: 文档化请求/响应格式\r\n- **README**: 每个主要目录提供说明文件\r\n\r\n## 待完善模块\r\n\r\n| 模块               | 状态   | 说明            |\r\n| ------------------ | ------ | --------------- |\r\n| `src/api/`         | 待创建 | API 接口封装    |\r\n| `src/router/`      | 待创建 | Vue Router 配置 |\r\n| `src/stores/`      | 待创建 | Pinia 状态管理  |\r\n| `src/utils/`       | 待创建 | 工具函数        |\r\n| `src/composables/` | 待创建 | 组合式函数      |\r\n| `AICityBackend/`   | 待创建 | 后端服务        |\r\n",
  "fileStats": {
    "size": 9682,
    "lines": 272,
    "lastModified": "2025-12-03T13:05:57.121Z"
  },
  "comments": []
}